{% assign curr_lang = page.lang | default: site.lang %}
{% if curr_lang == 'sv-SE' or curr_lang == 'sv' %}
    {% assign name-label = 'Namn' %}
    {% assign name-placeholder = 'för- och efternamn' %}
    {% assign email-label = 'Epost' %}
    {% assign email-placeholder = 'din epost' %}
    {% assign phone-label = 'Telefonnummer' %}
    {% assign phone-placeholder = '(frivilligt)' %}
    {% assign company-label = 'Företag' %}
    {% assign company-placeholder = '(frivilligt)' %}
    {% assign otherinfo-label = 'Övrig information' %}
    {% assign otherinfo-placeholder = 'Beskriv kort vad du vill diskutera (frivilligt)' %}

    {% assign calltoaction = 'Bli kontaktad' %}
    {% assign thankyou = 'Tack för din kontakt! Vi återkommer så snart vi kan.' %}
    {% assign header = 'Fyll i för att bli kontaktad' %}
    {% assign intro = 'Inledande samtal är alltid kostnadsfria.' %}
    {% assign submit-button-text = 'Skicka' %}
{% endif %}
{% if curr_lang == 'en' %}
    {% assign name-label = 'Name' %}
    {% assign name-placeholder = 'full name' %}
    {% assign email-label = 'Email' %}
    {% assign email-placeholder = 'your email' %}
    {% assign phone-label = 'Phone' %}
    {% assign phone-placeholder = '(optional)' %}
    {% assign company-label = 'Company' %}
    {% assign company-placeholder = '(optional)' %}
    {% assign otherinfo-label = 'Other information' %}
    {% assign otherinfo-placeholder = 'Briefly describe what you would like to discuss (optional)' %}

    {% assign calltoaction = 'Reach out' %}
    {% assign thankyou = 'Thank you for reaching out! We will get back to you as soon as we can.' %}
    {% assign header = 'Fill in to be contacted' %}
    {% assign intro = 'Initial consultations are always free of charge.' %}
    {% assign submit-button-text = 'Submit' %}
{% endif %}

{% if page.form-calltoaction %}
  {% assign calltoaction = page.form-calltoaction %}
{% endif %}

{% if page.form-thankyou %}
  {% assign thankyou = page.form-thankyou | markdownify  %}
{% endif %}

{% if page.form-header %}
  {% assign header = page.form-header | markdownify  %}
{% endif %}

{% if page.form-intro %}
  {% assign intro = page.form-intro | markdownify  %}
{% endif %}

{% assign pre-load = page.form-pre-load | default: false %}

{% if pre-load == false %}
<div id="show-form">
    <button id="toggle-form" class="btn btn-primary" onclick="toggleForm()">{{ calltoaction }}</button>
</div>
    {% assign form-hidden-class = 'hidden' %}
{% else %}
    {% assign form-hidden-class = '' %}
{% endif %}


<div id="contact-form" class="{{form-hidden-class}}">
<form action="https://docs.google.com/forms/d/e/1FAIpQLSdUFRkx-2pq_yjzAb6MuEOFkofBMYIVDR1gV5fQaYrDRZwjmg/formResponse"
      target="_blank"
      id="googleForm"
      method="POST">

    <fieldset>
        <h3>{{ header }}</h3>
        <p>{{ intro }}</p>
    </fieldset>


      <!-- Field type: "short" id: "2042895042" -->
    <fieldset>
        <legend for="2042895042">{{ name-label }}</legend>
        <div class="form-group">
            <input id="1313555169" type="text" name="entry.1313555169" placeholder="{{ name-placeholder }}" class="form-control short-paragraph" >
        </div>
    </fieldset>


    <!-- Field type: "short" id: "1233570625" -->
    <fieldset>
        <legend for="1233570625">{{ email-label }}</legend>
        <div class="form-group">
            <input id="512588435" type="text" name="entry.512588435" placeholder="{{ email-placeholder }}" class="form-control short-paragraph" required>
        </div>
    </fieldset>


    <!-- Field type: "short" id: "948075823" -->
    <fieldset>
        <legend for="948075823">{{ phone-label }}</legend>
        <div class="form-group">
            <input id="245589234" type="text" name="entry.245589234" placeholder="{{ phone-placeholder }}" class="form-control short-paragraph" >
        </div>
    </fieldset>


    <!-- Field type: "short" id: "1283115020" -->
    <fieldset>
        <legend for="1283115020">{{ company-label }}</legend>
        <div class="form-group">
            <input id="1334805505" type="text" name="entry.1334805505" placeholder="{{ company-placeholder }}" class="form-control short-paragraph" >
        </div>
    </fieldset>


    <!-- Field type: "paragraph" id: "281268994" -->
    <fieldset>
        <legend for="281268994">{{ otherinfo-label }}</legend>
        <div class="form-group">
            <textarea id="1145273164" name="entry.1145273164" class="form-control long-paragraph" placeholder="{{ otherinfo-placeholder }}"></textarea>
        </div>
    </fieldset>


    <input id="12768926" type="hidden" name="entry.12768926" class="form-control" value="{{ page.title }}" >
    <input type="hidden" name="fvv" value="1">
    <input type="hidden" name="fbzx" value="-6958935152286382507">
    <!--
        CAVEAT: In multipages (multisection) forms, *pageHistory* field tells to google what sections we've currently completed.
        This usually starts as "0" for the first page, then "0,1" in the second page... up to "0,1,2..N" in n-th page.
        Keep this in mind if you plan to change this code to recreate any sort of multipage-feature in your exported form.
        We're setting this to the total number of pages in this form because we're sending all fields from all the section together.
    -->
    <input type="hidden" name="pageHistory" value="0">

    <input class="btn btn-primary" type="submit" value="{{ submit-button-text }}">
</form>
</div>

<div id="thank-you" class="hidden information">
  {{ thankyou }}
</div>

<script>
    function toggleForm() {
        document.getElementById('contact-form').classList.remove('hidden');
        document.getElementById('show-form').classList.add('hidden');
    }

    document.getElementById('googleForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);

        fetch(form.action, {
            method: 'POST',
            body: formData,
            mode: 'no-cors' // Google Forms requires no-cors for cross-origin
        }).then(function() {
            // Hide form and show thank you
            document.getElementById('contact-form').classList.add('hidden');
            document.getElementById('thank-you').classList.remove('hidden');
        }).catch(function(error) {
            alert('Något gick fel. Försök igen senare.');
        });
        });
</script>